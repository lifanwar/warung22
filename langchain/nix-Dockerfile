FROM nixos/nix:latest

WORKDIR /app

# Copy shell.nix dan source code
COPY shell.nix .
COPY . .

# Install dependencies dari shell.nix
RUN nix-env -f shell.nix -i -A buildInputs

# Set environment variables dari shell.nix
ENV PYTHONUNBUFFERED=1